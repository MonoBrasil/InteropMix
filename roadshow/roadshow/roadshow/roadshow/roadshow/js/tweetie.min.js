/**
 * Tweetie: A simple Twitter feed plugin
 * Author: Sonny T. <hi@sonnyt.com>, sonnyt.com
 */(function(e){e.fn.twittie=function(t){var n=e.extend({count:10,hideReplies:!1,dateFormat:"%b/%d/%Y",template:"{{date}} - {{tweet}}"},t),r=function(e){var t=e.split(" "),n="";for(var r=0,i=t.length;r<i;r++){var s=t[r],o="https://twitter.com/#!/";s.indexOf("#")!==-1&&(s='<a href="'+o+"search/"+s.replace("#","%23").replace(/[^A-Za-z0-9]/,"")+'" target="_blank">'+s+"</a>");s.indexOf("@")!==-1&&(s='<a href="'+o+s.replace("@","").replace(/[^A-Za-z0-9]/,"")+'" target="_blank">'+s+"</a>");s.indexOf("http://")!==-1&&(s='<a href="'+s+'" target="_blank">'+s+"</a>");n+=s+" "}return n},i=function(e){var t=e.split(" ");e=new Date(Date.parse(t[1]+" "+t[2]+", "+t[5]+" "+t[3]+" UTC"));var r=["January","February","March","April","May","June","July","August","September","October","November","December"],i={"%d":e.getDate(),"%m":e.getMonth()+1,"%b":r[e.getMonth()].substr(0,3),"%B":r[e.getMonth()],"%y":String(e.getFullYear()).slice(-2),"%Y":e.getFullYear()},s=n.dateFormat,o=n.dateFormat.match(/%[dmbByY]/g);for(var u=0,a=o.length;u<a;u++)s=s.replace(o[u],i[o[u]]);return s},s=function(e){var t=n.template,r=["date","tweet","avatar"];for(var i=0,s=r.length;i<s;i++)t=t.replace(new RegExp("{{"+r[i]+"}}","gi"),e[r[i]]);return t};this.html("<span>Loading...</span>");var o=this;e.getJSON("api/tweet.php",{count:n.count,exclude_replies:n.hideReplies},function(e){o.find("span").fadeOut("fast",function(){o.html("<ul></ul>");for(var t=0;t<n.count;t++){if(!e[t])break;var u={date:i(e[t].created_at),tweet:r(e[t].text),avatar:'<img src="'+e[t].user.profile_image_url+'" />'};o.find("ul").append("<li>"+s(u)+"</li>")}})})}})(jQuery);